(this["webpackJsonpriscos-draw-react"]=this["webpackJsonpriscos-draw-react"]||[]).push([[0],{25:function(t,e,a){"use strict";(function(t){var r=a(11),n=a.n(r),i=a(26),c=a(15),o=a(4),u=a(30),s=a(29),f=a(2);e.a=function(){var e=Object(o.useState)(null),a=Object(c.a)(e,2),r=a[0],l=a[1];function h(){return(h=Object(i.a)(n.a.mark((function e(a){var r,i,o,s,f;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.target.files,i=void 0===r?[]:r,o=Object(c.a)(i,1),!(s=o[0])){e.next=17;break}return e.prev=3,e.t0=t,e.next=7,s.arrayBuffer();case 7:e.t1=e.sent,f=e.t0.from.call(e.t0,e.t1),l(Object(u.a)(new Uint8Array(f))),e.next=15;break;case 12:e.prev=12,e.t2=e.catch(3),l(null);case 15:e.next=18;break;case 17:l(null);case 18:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"RISC OS Draw Viewer"}),Object(f.jsx)("input",{type:"file",onChange:function(t){return h.apply(this,arguments)}}),Object(f.jsx)(s.a,{drawFile:r})]})}}).call(this,a(37).Buffer)},29:function(t,e,a){"use strict";var r=a(3),n=a(8),i=a(2),c=a(4),o=["tag"],u=1/640*(4/3);e.a=function(t){var e=t.drawFile;if(!e)return Object(i.jsx)("div",{});var a=e.boundingBox,s=a.minX,f=a.maxX,l=a.minY,h=a.maxY,b=e.objects,p=Math.max(f-s,1),d=Math.max(h-l,1),j=[s,-h,p,d],m=p*u,v=d*u;return Object(i.jsx)("div",{children:Object(i.jsx)("svg",{width:m,height:v,viewBox:"".concat(j.join(" ")),children:Object(i.jsx)("g",{transform:"scale(1,-1)",children:b.map((function(t,e){var a=t.tag,i=Object(n.a)(t,o);return Object(c.createElement)(a,Object(r.a)(Object(r.a)({},i),{},{key:e}))}))})})})}},30:function(t,e,a){"use strict";var r=a(8),n=a(3),i=a(12),c=a(5),o=a(1),u=a(13),s=a(0);var f=function(t){for(var e=t.pixelWidth,a=t.pixelHeight,r=t.image,n=t.mask,i=void 0===n?[]:n,c=function(t){var e=t.bitsPerPixel,a=t.palette,r=void 0===a?[]:a,n=t.wimpPalette;return r.length===1<<e?r:n}(t),o=[],u=0;u<r.length;u++){var s=c[r[u]].first,f=0===i[u]?0:255;o.push(s>>8&255),o.push(s>>16&255),o.push(s>>24&255),o.push(f)}return{width:e,height:a,pixels:o}},l=a(27),h=a.n(l),b=a(28),p=[137,80,78,71,13,10,26,10];var d,j,m,v=function(t){var e=t.width,a=t.height,r=function(t){var e=t.width,a=t.height,r=t.pixels,n=new Uint8Array(a*(1+4*e)),i=new DataView(n.buffer),c=0;function o(t){i.setUint8(c++,t)}for(var u=0,s=0;u<a;u++){o(0);for(var f=0;f<e;f++)o(r[s++]),o(r[s++]),o(r[s++]),o(r[s++])}return n}({width:e,height:a,pixels:t.pixels});return function(t){var e=t.width,a=t.height,r=t.imageData,n=t.bitDepth,i=t.colorType,o=t.compressionMethod,u=void 0===o?0:o,s=t.filterMethod,f=void 0===s?0:s,l=t.interlaceMethod,b=void 0===l?0:l,d=r.length,j=new Uint8Array(33+(12+d)+12),m=new DataView(j.buffer),v=0;function O(t){return j.set(t,v),v+=t.length}function x(t){return m.setUint32(v,t),v+=4}function g(t){return m.setInt32(v,t),v+=4}function y(t){return h.a.buf(j.slice(t,v))}function w(t){return Object(c.a)(t).map((function(t){return t.charCodeAt(0)}))}O(p);var A=x(13);O(w("IHDR")),x(e),x(a),O([n,i,u,f,b]),g(y(A));var D=x(d);O(w("IDAT")),O(r),g(y(D));var E=x(0);return O(w("IEND")),g(y(E)),j}({width:e,height:a,imageData:b.a.deflate(r),bitDepth:8,colorType:6})},O=a(14),x=["type","boundingBox"],g=(d={},Object(o.a)(d,s.TAG_END,""),Object(o.a)(d,s.TAG_MOVE,"M"),Object(o.a)(d,s.TAG_CLOSE_SUB_PATH,"Z"),Object(o.a)(d,s.TAG_BEZIER,"C"),Object(o.a)(d,s.TAG_DRAW,"L"),d),y=(j={},Object(o.a)(j,s.JOIN_MITRE,"mitre"),Object(o.a)(j,s.JOIN_ROUND,"round"),Object(o.a)(j,s.JOIN_BEVEL,"bevel"),j),w=(m={},Object(o.a)(m,s.CAP_BUTT,"butt"),Object(o.a)(m,s.CAP_ROUND,"round"),Object(o.a)(m,s.CAP_SQUARE,"square"),Object(o.a)(m,s.CAP_TRIANGLE,"triangle"),m);function A(t){var e,a=[],r=Object(i.a)(t);try{for(r.s();!(e=r.n()).done;){var n=e.value,c=n.tag,o=n.points,u=void 0===o?[]:o;a.push(g[c]),a.push(u.flatMap((function(t){return[t.x,t.y]})).join(" "))}}catch(s){r.e(s)}finally{r.f()}return a.join(" ")}function D(t){return 4294967295===t?"none":"rgb(".concat([t>>8&255,t>>16&255,t>>24&255],")")}function E(t){var e=t.fillColour,a=t.outlineColour,r=t.outlineWidth,i=t.pathStyle,c=i.join,o=i.capStart,u=i.windingRule,f=i.dash,l=t.path,h=f||{},b=h.offset,p=h.array;return Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)({tag:"path",d:A(l),fill:D(e),stroke:D(a),strokeWidth:Math.max(160,r)},c!==s.JOIN_MITRE&&{strokeLinejoin:y[c]}),o in[s.CAP_SQUARE,s.CAP_ROUND]&&{strokeLinecap:w[o]}),u===s.WINDING_EVEN_ODD&&{fillRule:"evenodd"}),b&&{strokeDashoffset:b}),p&&{strokeDasharray:p})}function _(t,e,a){var r=e.start,n=e.end,i=a.slice(r,n),c=u.Sprite.fromUint8Array(i),o=t.minX,s=t.maxX,l=t.minY,h=s-o,b=t.maxY-l,p=f(c),d=v(p),j=O.a.fromUint8Array(d);return{tag:"image",x:0,y:0,width:h,height:b,preserveAspectRatio:"none",xlinkHref:"data:image/png;base64,".concat(j),transform:"translate(".concat(o,", ").concat(l,") translate(0, ").concat(b,") scale(1, -1)")}}function T(t,e){var a=t.transform,r=t.start,n=t.end,i=e.slice(r,n),o=u.Sprite.fromUint8Array(i),s=o.pixelWidth,l=o.pixelHeight,h=o.xDpi,b=void 0===h?90:h,p=o.yDpi,d=46080*s/b,j=46080*l/(void 0===p?90:p),m=f(o),x=v(m),g=O.a.fromUint8Array(x),y=function(t){return[].concat(Object(c.a)(t.slice(0,4).map((function(t){return t/65536}))),Object(c.a)(t.slice(4)))}(a);return{tag:"image",x:0,y:0,width:d,height:j,preserveAspectRatio:"none",xlinkHref:"data:image/png;base64,".concat(g),transform:"matrix(".concat(y,") translate(0, ").concat(j,") scale(1, -1)")}}e.a=function(t){var e=s.Draw.fromUint8Array(t),a=e.header.boundingBox,n=e.objects;function c(t){if(t){var e=t.minX,r=t.maxX,n=t.minY,i=t.maxY;e>r||n>i||(a.minX=Math.min(a.minX,e),a.maxX=Math.max(a.maxX,r),a.minY=Math.min(a.minY,n),a.maxY=Math.max(a.maxY,i))}}var o,u=[],f=Object(i.a)(n);try{for(f.s();!(o=f.n()).done;){var l=o.value,h=l.type,b=l.boundingBox,p=Object(r.a)(l,x);switch(c(b),h){case s.TYPE_PATH:u.push(E(p));break;case s.TYPE_SPRITE:u.push(_(b,p,t));break;case s.TYPE_SPRITE_ROTATED:u.push(T(p,t))}}}catch(d){f.e(d)}finally{f.f()}return{boundingBox:a,objects:u}}},31:function(t,e,a){"use strict";a.r(e);var r=a(4),n=a.n(r),i=a(24),c=a.n(i),o=(a(36),a(25)),u=a(2);!function(){function t(){var t=this;return new Promise((function(e){var a=new FileReader;a.onload=function(){e(a.result)},a.readAsArrayBuffer(t)}))}File.prototype.arrayBuffer=File.prototype.arrayBuffer||t,Blob.prototype.arrayBuffer=Blob.prototype.arrayBuffer||t}(),c.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(o.a,{})}),document.getElementById("root"))},36:function(t,e,a){}},[[31,1,2]]]);
//# sourceMappingURL=main.f38ad637.chunk.js.map